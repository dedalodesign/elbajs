/*! elba - v0.5.0 - 2016-03-05
* https://github.com/iliketomatoes/elbajs
* Copyright (c) 2016 ; Licensed  */
!function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b()):a.Elba=b()}(window,function(){"use strict";function a(a){var b=window.getComputedStyle(a,null).getPropertyValue(g),c=b.match(/matrix(?:(3d)\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}\d+))(?:, (-{0,1}\d+))(?:, (-{0,1}\d+)), -{0,1}\d+\)|\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}.+))(?:, (-{0,1}.+))\))/);return c?"3d"==c[1]?c.slice(2,5):(c.push(0),c.slice(5,8)):[0,0,0]}function b(a,b){var d={selector:".elba",separator:"|",breakpoints:!1,successClass:"elba-loaded",errorClass:"elba-error",src:"data-src",error:!1,success:!1,duration:700,easing:"easeInOutSine",navigation:!0,dots:!0,slideshow:8e3,preload:1,swipeThreshold:60,directionHint:"right",align:"center"},e=function(a,b,c){return Object.create(D,{el:{writable:!1,value:a},GUID:{writable:!1,value:b},settings:{writable:!0,value:c},slider:{writable:!0,configurable:!0,value:null},slidesMap:{writable:!0,enumerable:!0,value:{}},count:{writable:!0,value:0},source:{writable:!0,value:{}},containerWidth:{writable:!0,value:0},pointer:{writable:!0,value:0},isSettled:{writable:!0,value:!0}})},f=p.extend(d,b);if(this.instances=[],a.indexOf("#")>-1){var g=a.slice(1),h=p.generateGUID();c[h]=e(document.getElementById(g),h,f),c[h].init(),this.instances.push(h)}}var c={},d=null,e=document.createElement("div"),f=function(){for(var a="transform WebkitTransform webkitTransform MozTransform OTransform msTransform".split(" "),b=0;b<a.length;b++)if(void 0!==e.style[a[b]])return a[b];return!1}(),g=function(){for(var a=window.getComputedStyle(e,null),b="transform -webkit-transform -moz-transform -ms-transform -o-transform".split(" "),c=0;c<b.length;c++)if(void 0!==a.getPropertyValue(b[c]))return b[c];return!1}(),h=function(){for(var a="transition WebkitTransition webkitTransition MozTransition OTransition".split(" "),b=0;b<a.length;b++)if(void 0!==e.style[a[b]])return a[b];return!1}();e=null;var i,j,k=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.cancelAnimationFrame||window.mozCancelAnimationFrame,window.devicePixelRatio>1;"undefined"!=typeof document.hidden?(i="hidden",j="visibilitychange"):"undefined"!=typeof document.mozHidden?(i="mozHidden",j="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(i=" msHidden",j="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",j="webkitvisibilitychange");var l,m,n,o,p={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isElementInViewport:function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.top<=(window.innerHeight||document.documentElement.clientHeight)||b.bottom>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)},makeArray:function(a){return Array.prototype.slice.call(a)},getCloneNodes:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.push(d)}return b},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},intVal:function(a){return a?parseInt(a,10):0},generateGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},selectorMatches:function(a,b){var c=Element.prototype,d=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)};return d.call(a,b)},getNodeElementByIndex:function(a,b){return a[b]},setListener:function(a,b,c){for(var d=b.split(" "),e=d.length;e--;)a.addEventListener(d[e],c,!1)},getPercentageRatio:function(a,b){var c=(a/b).toFixed(2);return 100*c}},q=function(a){var b=a.toLowerCase(),c="MS"+a;return navigator.msPointerEnabled?c:b},r=function(a,b){var c;return function(){var d=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},s=function(a){return a.targetTouches?a.targetTouches[0]:a},t=function(a,b,c,d){var e=document.createEvent("Event");if(e.originalEvent=c,d=d||{},d.x=l,d.y=m,d.distance=d.distance,e.initEvent){for(var f in d)e[f]=d[f];e.initEvent(b,!0,!0),a.dispatchEvent(e)}a["on"+b]&&a["on"+b](e)},u={events:{start:q("PointerDown")+" touchstart mousedown",end:q("PointerUp")+" touchend mouseup",move:q("PointerMove")+" touchmove mousemove"},onTouchStart:function(a){var b=s(a);n=l=b.pageX,o=m=b.pageY,w++},onTouchEnd:function(a){var b=[],c=o-m,e=n-l;if(-v>=e&&(d&&d.goTo("previous"),b.push("swiperight")),e>=v&&(d&&d.goTo("next"),b.push("swipeleft")),-v>=c&&b.push("swipedown"),c>=v&&b.push("swipeup"),b.length){for(var f=0;f<b.length;f++){var g=b[f];t(a.target,g,a,{distance:{x:Math.abs(e),y:Math.abs(c)}})}w=0}d=null},onTouchMove:function(a){if(d){var b=s(a);l=b.pageX,m=b.pageY;var c=o-m,e=n-l;w>0&&(Math.abs(e)>=v||Math.abs(c)>=v)&&t(a.target,"drag",a,{delta:{x:e,y:c}})}}},v=window.SWIPE_THRESHOLD||100,w=0;p.setListener(document,u.events.start,r(u.onTouchStart,1)),p.setListener(document,u.events.end,r(u.onTouchEnd,1)),p.setListener(document,u.events.move,r(u.onTouchMove,1));var x={build:function(){this.setLayout();var a=this.getSlides();this.registerSlidesWidth(a),this.setSlidesOffset(a)}};x.setLayout=function(){var a=document.createDocumentFragment(),b=document.createElement("div");b.className="elba-viewport",a.appendChild(b);var c=document.createElement("div");c.className="elba-slider",c.setAttribute("data-elba-id",this.GUID),b.appendChild(c);var d=p.getCloneNodes(this.el.children);if(d)for(var e=0;e<d.length;e++)c.appendChild(d[e]);p.removeChildren(this.el),this.el.appendChild(a)},x.setSlidesOffset=function(a){for(var b=a||this.getSlides(),c=this.getContainerWidth(),d=0,e=1;e<b.length;e++){var f=p.getPercentageRatio(p.intVal(this.slidesMap[e-1].width),c);b[e].style.left=f+d+"%",d+=f}},x.setNavigation=function(){this.setArrow("right"),this.setArrow("left")},x.setArrow=function(a){var b="http://www.w3.org/2000/svg",c=document.createElement("a");if(c.className="elba-"+a+"-nav elba-arrow","left"===a){var d=document.createElementNS(b,"svg");d.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(b,"path");e.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),e.setAttribute("transform","translate(15,0)"),e.setAttribute("class","elba-svg-arrow"),d.appendChild(e),c.appendChild(d)}else{var f=document.createElementNS(b,"svg");f.setAttribute("viewBox","0 0 100 100");var g=document.createElementNS(b,"path");g.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),g.setAttribute("class","elba-svg-arrow"),g.setAttribute("transform","translate(85,100) rotate(180)"),f.appendChild(g),c.appendChild(f)}this.el.appendChild(c)},x.registerSlidesWidth=function(a){for(var b=a||this.getSlides(),c=0;c<b.length;c++)"undefined"==typeof this.slidesMap[c]&&(this.slidesMap[c]={}),this.slidesMap[c].width=p.intVal(window.getComputedStyle(b[c]).getPropertyValue("width"))};var y=Object.create(x);y.goTo=function(b){var c,d,e,f=p.intVal(a(this.getSlider())[0]),g=this.getContainerWidth();if("next"===b){switch(this.pointer+=1,e=this.slidesMap[this.pointer].width,this.settings.align){case"center":c=-f+this.slidesMap[this.pointer-1].width/2+e/2;break;case"left":c=-f+this.slidesMap[this.pointer-1].width;break;case"right":c=-f+e;break;default:c=-f+this.slidesMap[this.pointer-1].width/2+e/2}d="-"+p.getPercentageRatio(c,g)+"%"}else if("previous"===b){switch(this.pointer-=1,e=this.slidesMap[this.pointer].width,this.settings.align){case"center":c=f+this.slidesMap[this.pointer+1].width/2+e/2;break;case"left":c=f+this.slidesMap[this.pointer].width;break;case"right":c=f+this.slidesMap[this.pointer+1].width;break;default:c=f+this.slidesMap[this.pointer+1].width/2+e/2}d=p.getPercentageRatio(c,g)+"%"}this.slide(d)},y.slide=function(a,b){var c,d,e=this.getSlider();"number"==typeof a?(c=b||this.getContainerWidth(),d=p.getPercentageRatio(a,c)+"%"):d=a,k(function(){e.style[h]=f+" 0.8s",e.style[f]="translate3d("+d+",0,0)"})};var z=Object.create(y);z.loadImages=function(){return console.log(this.el),this};var A=function(a){classie.hasClass(a.target,"elba-right-nav")?this.goTo("next"):this.goTo("previous")},B=function(a){null===d&&(d=c[this.GUID])},C=Object.create(z);C.initEvents=function(){this.settings.navigation&&this.setArrowsListener(),this.setSliderListener()},C.setArrowsListener=function(){for(var a=p.makeArray(this.getArrows()),b=0;a[b];)a[b].addEventListener("click",A.bind(this)),b++},C.setSliderListener=function(){var a=this.getSlider();p.setListener(a,u.events.start,B.bind(this))};var D=Object.create(C);return D.init=function(){this.build(),this.count=this.getSlidesCount(),this.containerWidth=this.getContainerWidth(),this.settings.navigation&&this.count>1&&this.setNavigation(),this.initEvents()},D.getSlider=function(){return this.slider?this.slider:this.slider=this.el.querySelector(".elba-slider")},D.getSlides=function(){return this.el.querySelectorAll(".elba")},D.getArrows=function(){return this.el.querySelectorAll(".elba-arrow")},D.getSlidesCount=function(){return this.count?this.count:this.count=this.getSlides().length},D.getContainerWidth=function(){return this.containerWidth?this.containerWidth:this.containerWidth=this.el.querySelector(".elba-viewport").clientWidth},b});