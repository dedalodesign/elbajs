/*! elba - v0.5.0 - 2016-03-09
* https://github.com/iliketomatoes/elbajs
* Copyright (c) 2016 ; Licensed  */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.BezierEasing=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b){return 1-3*b+3*a}function d(a,b){return 3*b-6*a}function e(a){return 3*a}function f(a,b,f){return((c(b,f)*a+d(b,f))*a+e(b))*a}function g(a,b,f){return 3*c(b,f)*a*a+2*d(b,f)*a+e(b)}function h(a,b,c,d,e){var g,h,i=0;do h=b+(c-b)/2,g=f(h,d,e)-a,g>0?c=h:b=h;while(Math.abs(g)>m&&++i<n);return h}function i(a,b,c,d){for(var e=0;k>e;++e){var h=g(b,c,d);if(0===h)return b;var i=f(b,c,d)-a;b-=i/h}return b}function j(a,b,c,d){if(4===arguments.length)return new j([a,b,c,d]);if(!(this instanceof j))return new j(a);if(!a||4!==a.length)throw new Error("BezierEasing: points must contains 4 values");for(var e=0;4>e;++e)if("number"!=typeof a[e]||isNaN(a[e])||!isFinite(a[e]))throw new Error("BezierEasing: points should be integers.");if(a[0]<0||a[0]>1||a[2]<0||a[2]>1)throw new Error("BezierEasing x values must be in [0, 1] range.");this._str="BezierEasing("+a+")",this._css="cubic-bezier("+a+")",this._p=a,this._mSampleValues=q?new Float32Array(o):new Array(o),this._precomputed=!1,this.get=this.get.bind(this)}var k=4,l=.001,m=1e-7,n=10,o=11,p=1/(o-1),q="function"==typeof Float32Array;j.prototype={get:function(a){var b=this._p[0],c=this._p[1],d=this._p[2],e=this._p[3];return this._precomputed||this._precompute(),b===c&&d===e?a:0===a?0:1===a?1:f(this._getTForX(a),c,e)},getPoints:function(){return this._p},toString:function(){return this._str},toCSS:function(){return this._css},_precompute:function(){var a=this._p[0],b=this._p[1],c=this._p[2],d=this._p[3];this._precomputed=!0,(a!==b||c!==d)&&this._calcSampleValues()},_calcSampleValues:function(){for(var a=this._p[0],b=this._p[2],c=0;o>c;++c)this._mSampleValues[c]=f(c*p,a,b)},_getTForX:function(a){for(var b=this._p[0],c=this._p[2],d=this._mSampleValues,e=0,f=1,j=o-1;f!==j&&d[f]<=a;++f)e+=p;--f;var k=(a-d[f])/(d[f+1]-d[f]),m=e+k*p,n=g(m,b,c);return n>=l?i(a,m,b,c):0===n?m:h(a,e,e+p,b,c)}},j.css={ease:j.ease=j(.25,.1,.25,1),linear:j.linear=j(0,0,1,1),"ease-in":j.easeIn=j(.42,0,1,1),"ease-out":j.easeOut=j(0,0,.58,1),"ease-in-out":j.easeInOut=j(.42,0,.58,1)},b.exports=j},{}]},{},[1])(1)}),function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b()):a.Elba=b()}(window,function(){"use strict";function a(a){var b,c=/matrix\((.*)\)/,d=window.getComputedStyle(a)[g];return d.indexOf("matrix")>-1?(b=c.exec(d)[1].split(",").map(function(a){return parseFloat(a)}),b[4]):0}function b(a,b){var d={selector:".elba",separator:"|",breakpoints:!1,successClass:"elba-loaded",errorClass:"elba-error",src:"data-src",error:!1,success:!1,duration:700,easing:"easeInOutSine",navigation:!0,dots:!0,slideshow:8e3,preload:1,swipeThreshold:60,directionHint:"right",align:"center"},e=function(a,b,c){return Object.create(D,{el:{writable:!1,value:a},GUID:{writable:!1,value:b},settings:{writable:!0,value:c},slider:{writable:!0,configurable:!0,value:null},proxy:{writable:!0,value:!0,value:{pointer:0,oldPointer:0,isSettled:!0,isWrappable:!1,isFirstElTranslated:!1,isLastElTranslated:!1,isWrapProcessOngoing:!1,viewportWidth:0,xCssTranslation:0,xNormalizedTranslation:0,totalSlidesWidth:0,targetOffset:0,updateTranslation:function(a){this.xCssTranslation=a,this.xNormalizedTranslation=a/this.viewportWidth}}},slidesMap:{writable:!0,enumerable:!0,value:[]},source:{writable:!0,value:{}}})},f=p.extend(d,b);if(this.instances=[],a.indexOf("#")>-1){var g=a.slice(1),h=p.generateGUID();c[h]=e(document.getElementById(g),h,f),c[h].init(),this.instances.push(h)}}var c={},d=null,e=document.createElement("div"),f=function(){for(var a="transform WebkitTransform webkitTransform MozTransform OTransform msTransform".split(" "),b=0;b<a.length;b++)if(void 0!==e.style[a[b]])return a[b];return!1}(),g=function(){for(var a=window.getComputedStyle(e,null),b="transform -webkit-transform -moz-transform -ms-transform -o-transform".split(" "),c=0;c<b.length;c++)if(void 0!==a.getPropertyValue(b[c]))return b[c];return!1}();(function(){for(var a="transition WebkitTransition webkitTransition MozTransition OTransition".split(" "),b=0;b<a.length;b++)if(void 0!==e.style[a[b]])return a[b];return!1})();e=null;var h,i,j=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,k=window.cancelAnimationFrame||window.mozCancelAnimationFrame;window.devicePixelRatio>1;"undefined"!=typeof document.hidden?(h="hidden",i="visibilitychange"):"undefined"!=typeof document.mozHidden?(h="mozHidden",i="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(h=" msHidden",i="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(h="webkitHidden",i="webkitvisibilitychange");var l,m,n,o,p={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isElementInViewport:function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.top<=(window.innerHeight||document.documentElement.clientHeight)||b.bottom>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)},makeArray:function(a){return Array.prototype.slice.call(a)},getCloneNodes:function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c].cloneNode(!0);b.push(d)}return b},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},generateGUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},selectorMatches:function(a,b){var c=Element.prototype,d=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)};return d.call(a,b)},getNodeElementByIndex:function(a,b){return a[b]},setListener:function(a,b,c){for(var d=b.split(" "),e=d.length;e--;)a.addEventListener(d[e],c,!1)},getPercentageRatio:function(a,b){var c=(a/b).toFixed(2);return 100*c}},q=function(a){var b=a.toLowerCase(),c="MS"+a;return navigator.msPointerEnabled?c:b},r=function(a,b){var c;return function(){var d=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},s=function(a){return a.targetTouches?a.targetTouches[0]:a},t=function(a,b,c,d){var e=document.createEvent("Event");if(e.originalEvent=c,d=d||{},d.x=l,d.y=m,d.distance=d.distance,e.initEvent){for(var f in d)e[f]=d[f];e.initEvent(b,!0,!0),a.dispatchEvent(e)}a["on"+b]&&a["on"+b](e)},u={events:{start:q("PointerDown")+" touchstart mousedown",end:q("PointerUp")+" touchend mouseup",move:q("PointerMove")+" touchmove mousemove"},onTouchStart:function(a){var b=s(a);n=l=b.pageX,o=m=b.pageY,w++},onTouchEnd:function(a){var b=[],c=o-m,e=n-l;if(-v>=e&&(d&&d.goTo("previous"),b.push("swiperight")),e>=v&&(d&&d.goTo("next"),b.push("swipeleft")),-v>=c&&b.push("swipedown"),c>=v&&b.push("swipeup"),b.length){for(var f=0;f<b.length;f++){var g=b[f];t(a.target,g,a,{distance:{x:Math.abs(e),y:Math.abs(c)}})}w=0}d=null},onTouchMove:function(a){if(d){var b=s(a);l=b.pageX,m=b.pageY;var c=o-m,e=n-l;w>0&&(Math.abs(e)>=v||Math.abs(c)>=v)&&t(a.target,"drag",a,{delta:{x:e,y:c}})}}},v=window.SWIPE_THRESHOLD||100,w=0;p.setListener(document,u.events.start,r(u.onTouchStart,1)),p.setListener(document,u.events.end,r(u.onTouchEnd,1)),p.setListener(document,u.events.move,r(u.onTouchMove,1));var x={build:function(){this.setLayout();var a=this.getSlides();this.registerSlidesWidth(a),this.proxy.isWrappable=!0,this.setSlidesOffset(a),this.proxy.lastEl=a.length-1}};x.setLayout=function(){var a=document.createDocumentFragment(),b=document.createElement("div");b.className="elba-viewport",a.appendChild(b);var c=document.createElement("div");c.className="elba-slider",c.setAttribute("data-elba-id",this.GUID),b.appendChild(c);var d=p.getCloneNodes(this.el.children);if(d)for(var e=0;e<d.length;e++)c.appendChild(d[e]);p.removeChildren(this.el),this.el.appendChild(a)},x.setSlidesOffset=function(a){for(var b=a||this.getSlides(),c=0,d=1;d<b.length;d++){var e=this.slidesMap[d-1].width;this.proxy.isWrappable&&d===b.length-1?(b[d].style.left=-e+"px",this.proxy.isLastElTranslated=!0):(b[d].style.left=e+c+"px",c+=e)}},x.setNavigation=function(){this.setArrow("right"),this.setArrow("left")},x.setArrow=function(a){var b="http://www.w3.org/2000/svg",c=document.createElement("a");if(c.className="elba-"+a+"-nav elba-arrow","left"===a){var d=document.createElementNS(b,"svg");d.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(b,"path");e.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),e.setAttribute("transform","translate(15,0)"),e.setAttribute("class","elba-svg-arrow"),d.appendChild(e),c.appendChild(d)}else{var f=document.createElementNS(b,"svg");f.setAttribute("viewBox","0 0 100 100");var g=document.createElementNS(b,"path");g.setAttribute("d","M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z"),g.setAttribute("class","elba-svg-arrow"),g.setAttribute("transform","translate(85,100) rotate(180)"),f.appendChild(g),c.appendChild(f)}this.el.appendChild(c)},x.registerSlidesWidth=function(a){for(var b=a||this.getSlides(),c=this.getViewportWidth(),d=0;d<b.length;d++)"undefined"==typeof this.slidesMap[d]&&(this.slidesMap[d]={}),this.slidesMap[d].width=parseFloat(window.getComputedStyle(b[d]).getPropertyValue("width")),this.slidesMap[d].normalizedWidth=this.slidesMap[d].width/c,this.proxy.totalSlidesWidth+=this.slidesMap[d].width};var y=Object.create(x);y.goTo=function(a){var b,c,d,e=this.proxy.xCssTranslation;this.getSlider();if("next"===a)switch(this.proxy.pointer+=1,c=this.getCellAlignOffsetAdjustment(this.proxy.pointer),d=this.getCellDenormalizedOffset(this.proxy.pointer),this.settings.align){case"center":b=-(d-c+e);break;case"left":b=-this.slidesMap[oldPointer].width;break;case"right":b=-targetSlideWidth;break;default:b=-(this.slidesMap[oldPointer].width/2)-targetSlideWidth/2}else if("previous"===a){if(this.proxy.pointer-=1,this.proxy.pointer<0){var f=this.slidesMap.length-1;d=-this.slidesMap[f].width,c=this.getCellAlignOffsetAdjustment(f)}else d=this.getCellDenormalizedOffset(this.proxy.pointer),c=this.getCellAlignOffsetAdjustment(this.proxy.pointer);switch(this.settings.align){case"center":b=-e-d+c,console.log(b);break;case"left":b=this.slidesMap[this.proxy.pointer].width;break;case"right":b=this.slidesMap[oldPointer].width;break;default:b=this.slidesMap[oldPointer].width/2+targetSlideWidth/2}}this.slide(b,e)},y.slide=function(a,b){function c(a){null===d&&(d=a),n.isSettled=!1;var b=a-d,r=b/g,s=Number(Math.round(n.targetOffset*h.get(r)+"e2")+"e-2");if(r>=1&&(s=n.targetOffset,r=1),n.targetOffset>0)if(-1===n.pointer&&!n.isFirstElTranslated&&Math.abs(s)>=m[p].width/2){console.log("translate the whole thing");var t=n.totalSlidesWidth;l[p].style.left=t-m[p].width+"px",n.isLastElTranslated=!1,l[0].style.left=t+"px",n.isFirstElTranslated=!0;var u=-(t-s);q=u-s,n.isWrapProcessOngoing=!0,i.style[f]="translate3d("+u+"px,0,0)",console.log("new starting offset: "),console.log(u),console.log("absolute delta: "),console.log(s+q)}else 0!==n.pointer||n.isLastElTranslated||Math.abs(s)>=m[n.pointer].width/2&&(console.log("last cell go first"),l[p].style.left=-m[p].width+"px",n.isLastElTranslated=!0),1===n.pointer&&n.isFirstElTranslated&&Math.abs(s)>=m[n.pointer].width/2&&(console.log("first cell go first"),l[0].style.left="0px",n.isFirstElTranslated=!1),i.style[f]="translate3d("+(s+q)+"px,0,0)",n.updateTranslation(s+q),console.log("absolute delta: "),console.log(s+q);else n.pointer===o-2&&n.isLastElTranslated&&Math.abs(s)>=m[n.pointer].width/2&&(l[p].style.left=n.totalSlidesWidth-m[p].width+"px",n.isLastElTranslated=!1),n.pointer!==p||n.isFirstElTranslated||Math.abs(s)>=m[n.pointer-1].width/2&&(l[0].style.left=n.totalSlidesWidth+"px",n.isFirstElTranslated=!0),i.style[f]="translate3d("+(s+q)+"px,0,0)",n.updateTranslation(s+q);1===r?(i.style[f]="translate("+(n.targetOffset+q)+"px,0)",k(e),n.updateTranslation(s+q),n.isSettled=!0,d=null):e=j(c)}var d,e,g=this.settings.duration,h=BezierEasing.css["ease-in-out"],i=this.getSlider(),l=this.getSlides(),m=this.slidesMap,n=this.proxy;n.targetOffset=a;var o=m.length,p=o-1,q=b||n.xCssTranslation;d=null,n.isSettled?n.oldPointer=n.pointer:(k(e),n.isSettled=!0),e=j(c)},y.getCellDenormalizedOffset=function(a){for(var b=0,c=0;a>c;c++)b+=this.slidesMap[c].normalizedWidth;return b*this.proxy.viewportWidth},y.getCellAlignOffsetAdjustment=function(a){return(this.proxy.viewportWidth-this.slidesMap[a].width)/2};var z=Object.create(y);z.loadImages=function(){return console.log(this.el),this};var A=function(a){classie.hasClass(a.target,"elba-right-nav")?this.goTo("next"):this.goTo("previous")},B=function(a){null===d&&(d=c[this.GUID])},C=Object.create(z);C.initEvents=function(){this.settings.navigation&&this.setArrowsListener(),this.setSliderListener()},C.setArrowsListener=function(){for(var a=p.makeArray(this.getArrows()),b=0;a[b];)a[b].addEventListener("click",A.bind(this)),b++},C.setSliderListener=function(){var a=this.getSlider();p.setListener(a,u.events.start,B.bind(this))};var D=Object.create(C);return D.init=function(){this.build(),this.settings.navigation&&this.slidesMap.length>1&&this.setNavigation(),this.updateProxy(),this.initEvents()},D.getSlider=function(){return this.slider?this.slider:this.slider=this.el.querySelector(".elba-slider")},D.getSlides=function(){return this.el.querySelectorAll(".elba")},D.getArrows=function(){return this.el.querySelectorAll(".elba-arrow")},D.getViewportWidth=function(){return this.proxy.viewportWidth?this.proxy.viewportWidth:this.proxy.viewportWidth=this.el.querySelector(".elba-viewport").clientWidth},D.updateProxy=function(){this.proxy.viewportWidth=this.getViewportWidth(),this.proxy.xCssTranslation=a(this.getSlider())},b});